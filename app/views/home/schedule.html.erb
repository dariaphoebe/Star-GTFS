<div class="schedule_container">
<% if @schedule.keys.count > 1 %>
    <div class="dir_select">
      <label for="heading">Vers:</label>
  <%= select_tag "heading", 
                options_for_select( @headsigns.invert, @schedule.keys.first ) %>
    </div>
<% end %>
  <%= div_clear %>
<% @schedule.each do |direction_id,hours| %>
<div class="headsign" id="heading_<%= direction_id %>">
  <h2><%= @headsigns[direction_id] %></h2>
  <table class="schedule">
    <tr>
      <th>&nbsp;</th>
      <% @all_calendars.keys.each do |calendar| %>
      <th><%= Calendar.range_to_str( calendar ) %></th>
      <% end %>
    </tr>
    <% hours.keys.sort.each do |hour| %>
    <tr>
      <th><%= hour %>h</th>
      <% @all_calendars.keys.each do |calendar| %>
      <td>&nbsp;
        <% if hours[hour].has_key? calendar %>
          <% hours[hour][calendar].each do|min| %>
            <%= min %><br />
          <% end # mins %>
        <% end %>
      </td>
      <% end # calendar %>
    </tr>
    <% end # hours%>
  </table>
  <%= div_clear %>
</div>
  <%= div_clear %>
<% end %>

<%= init_javascript "$.Star.init();" %>
<% if @schedule.keys.count == 1 %>
  <%= init_javascript "$('div.headsign:first').show();" %>
  <%= init_javascript "console.log('tamere');" %>
<% end %>
</div>